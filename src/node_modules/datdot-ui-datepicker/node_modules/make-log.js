module.exports = makelog

function makelog (name = '<unknown>', message, num) {
    if (!name || global[name]) throw new Error('pick unique name')
    const num = global[name] = Math.floor(Math.random()*360)
    const css1 = style(randomcolor(num), 'white')
    const css2 = style('white', randomcolor(num))
    return function log (message) {
      if (Object(message) !== message) message = { body: message }
      var { from: sender, type = 'log', body } = message
      const relation = type === 'status' ? `--STATUS->` : `==(${type})=>`
      const X = type === 'status' ? `${name}:${sender}` : sender
      var Y = type === 'status' ? body : name
      if (name === sender && type !== 'status') Y = ''
      const value = type === 'status' ? void 0 : body
      console.log(`\n%c${X}%c${relation}%c${Y}`, css1, css2, css1, value)
    }
  }

  function randomcolor (num) {
    return `hsla(${num},100%,70%,1)`
  }
  function style (a, b) {
    return `background-color: ${a}; border: 1px solid ${b}; color: black;`
  }